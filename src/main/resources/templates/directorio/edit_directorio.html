<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Editar Directorio</title>
     <!-- Fonts and icons -->
     <script src="/assets/js/plugin/webfont/webfont.min.js"></script>
     <script>
       WebFont.load({
         google: { families: ["Public Sans:300,400,500,600,700"] },
         custom: {
           families: [
             "Font Awesome 5 Solid",
             "Font Awesome 5 Regular",
             "Font Awesome 5 Brands",
             "simple-line-icons",
           ],
           urls: ["/assets/css/fonts.min.css"],
         },
         active: function () {
           sessionStorage.fonts = true;
         },
       });
     </script>
 
     <!-- CSS Files -->
     <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
     <link rel="stylesheet" href="/assets/css/plugins.min.css" />
     <link rel="stylesheet" href="/assets/css/kaiadmin.min.css" />
 
     <!-- CSS Just for demo purpose, don't include it in your project -->
     <link rel="stylesheet" href="/assets/css/demo.css" />
</head>
<body>
    <h1>Editar Directorio</h1>
    <form th:action="@{/directorios/update/{id}(id=${directorio.nitdir})}" th:object="${directorio}" method="post">

  
          
      <div class="row">
        <div class="offset-md-4 col-md-3 form-inline">
          
          <label
            for="nitdir"
            class="col-md-12 col-form-label"
            >Documento:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              th:readonly="true"
              id="nitdir"
              name="nitdir"
              th:field="*{nitdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('nitdir')}" th:errors="*{nitdir}"></div>
          </div>
        </div>

        <div class="col-md-1 form-group form-inline">
          <label
            for="dcnitdir"
            class="col-md-12 col-form-label"
            >dc:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"  oninput="this.value = this.value.replace(/[^0-9]/g, '');"
              class="form-control input-full"
              id="dcnitdir"
              maxlength="1"
              value="0"
              th:field="*{dcnitdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('dcnitdir')}" th:errors="*{dcnitdir}"></div>
          </div>
        </div>
    </div>

    <div class="row">
        <div class="offset-md-1 col-md-5 form-group form-inline">
          <label
            for="nomdir"
            class="col-md-12 col-form-label"
            >Nombre:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="nomdir"
              name="nomdir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{nomdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('nomdir')}" th:errors="*{nomdir}"></div>
          </div>
        </div>
        <div class="col-md-4 form-group form-inline">
          <label
            for="diredir"
            class="col-md-12 col-form-label"
            >Dirección:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="diredir"
              name="diredir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{diredir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('diredir')}" th:errors="*{diredir}"></div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="offset-md-1 col-md-5 form-group form-inline">
          <label
            for="almacen"
            class="col-md-12 col-form-label"
            >Almacen:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="almacen"
              name="almacen"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{almacen}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('almacen')}" th:errors="*{almacen}"></div>
          </div>
        </div>
        <div class="col-md-1 form-group form-inline">
          <label
            for="preteldir"
            class="col-md-12 col-form-label"
            >Pref:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="preteldir"
              name="preteldir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{preteldir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('preteldir')}" th:errors="*{preteldir}"></div>
          </div>
        </div>
        <div class="col-md-4 form-group form-inline">
          <label
            for="teldir"
            class="col-md-12 col-form-label"
            >Teléfono:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="teldir"
              name="teldir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{teldir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('teldir')}" th:errors="*{teldir}"></div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="offset-md-1 col-md-3 form-group">
          <label for="departamento">Departamento:</label>
          <select class="form-select" id="departamento" th:field="*{dptodir}" onchange="updateCiudades()">
          <option th:each="ciudad : ${municipios}" 
          th:value="${ciudad.key}" 
          th:text="${ciudad.key}"></option>              
          </select>
        </div>
        <div class="col-md-3 form-group">
          <label for="ciudad">Ciudad:</label>
          <select class="form-select" id="ciudad" th:field="*{ciudir}" >
                      
          </select>
        </div>
        
        
        
        <div class="col-md-1 form-group form-inline">
          <label
            for="prefaxdir"
            class="col-md-12 col-form-label"
            >Pref:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="prefaxdir"
              name="prefaxdir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{prefaxdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('prefaxdir')}" th:errors="*{prefaxdir}"></div>
          </div>
        </div>
        <div class="col-md-3 form-group form-inline">
          <label
            for="faxdir"
            class="col-md-12 col-form-label"
            >Fax:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="faxdir"
              name="faxdir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{faxdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('faxdir')}" th:errors="*{faxdir}"></div>
          </div>
        </div>
      </div>


      <div class="row">
        <div class="offset-md-1 col-md-6 form-group form-inline">
          <label
            for="contacdir"
            class="col-md-12 col-form-label"
            >Contacto:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="contacdir"
              name="contacdir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{contacdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('contacdir')}" th:errors="*{contacdir}"></div>
          </div>
        </div>
        <div class="col-md-1 form-group form-inline">
          <label
            for="pretelcontacdir"
            class="col-md-12 col-form-label"
            >Pref:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="pretelcontacdir"
              name="pretelcontacdir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{pretelcontacdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('pretelcontacdir')}" th:errors="*{pretelcontacdir}"></div>
          </div>
        </div>
        <div class="col-md-3 form-group form-inline">
          <label
            for="telcontacdir"
            class="col-md-12 col-form-label"
            >Tel Contacto:</label
          >
          <div class="col-md-12 p-0">
            <input
              type="text"
              class="form-control input-full"
              id="telcontacdir"
              name="telcontacdir"
              style="text-transform: uppercase;"
              oninput="this.value = this.value.toUpperCase();"
              th:field="*{telcontacdir}"
            />
             <!-- Mostrar error -->
             <div class="text-danger" th:if="${#fields.hasErrors('telcontacdir')}" th:errors="*{telcontacdir}"></div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="offset-md-1 col-md-5 form-group">
          <label for="vendedor">Vendedor:</label>
          <select class="form-select" id="vendedor" th:field="*{nomvddor}">
            <option value="NO APLICA">NO APLICA</option> 
          <option th:each="vendedor : ${vendedores}" 
          th:value="${vendedor.nomdir}" 
          th:text="${vendedor.nomdir}"></option>              
          </select>
        </div>
        
      <div class="col-md-5 form-group">

        <div class="form-check">
          <input 
              class="form-check-input" 
              type="checkbox" 
              id="clteCheckbox" 
              th:field="*{clte}" 
              th:value="'True'" 
              onclick="updateCheckboxValue(this)">
          <label class="form-check-label" for="clteCheckbox">Cliente</label>
          <div class="text-danger" th:if="${#fields.hasErrors('clte')}" th:errors="*{clte}"></div>

        </div>
  
      <div class="form-check">
          <input 
              class="form-check-input" 
              type="checkbox" 
              id="vddorCheckbox" 
              th:field="*{vddor}" 
              th:value="'True'" 
              onclick="updateCheckboxValue(this)">
          <label class="form-check-label" for="vddorCheckbox">Vendedor</label>
          <div class="text-danger" th:if="${#fields.hasErrors('vddor')}" th:errors="*{vddor}"></div>

      </div>
  
      <div class="form-check">
          <input 
              class="form-check-input" 
              type="checkbox" 
              id="emplCheckbox" 
              th:field="*{empl}" 
              th:value="'True'" 
              onclick="updateCheckboxValue(this)">
          <label class="form-check-label" for="emplCheckbox">Empleado</label>
          <div class="text-danger" th:if="${#fields.hasErrors('empl')}" th:errors="*{empl}"></div>

      </div>

    </div>
      
    </div>
  <div class="row">
    <div class="offset-md-3 col-md-6">
      <button type="submit" class="btn btn-success" style="width: 100%; height: 100px;" >Actualizar</button>
    </div>
  </div>


  </form>

  <!-- Scripts -->
  <script  th:inline="javascript">
    document.addEventListener("DOMContentLoaded", function () {
      updateCiudades(); // Llama al método cuando el DOM esté listo
  });
    // JavaScript para manejar el evento de cambio del select
    function updateCiudades() {
        const municipios = /*[[${municipios}]]*/ {};
        const select = document.getElementById("departamento");
        const selectedKey = select.value; // Obtiene la clave seleccionada
        const municipiosSelect = document.getElementById("ciudad");          
        // Limpia la lista de municipios actuales
        municipiosSelect.innerHTML = "";
  
        if (municipios[selectedKey]) {
            // Obtén el array de municipios asociadas
      const municipiosArray = municipios[selectedKey];


      municipiosArray.forEach(function (municipio) {
        const option = document.createElement("option");
        option.value = municipio;
        option.textContent = municipio;
        municipiosSelect.appendChild(option);
    });
  
        }
    }
  </script>
</body>
</html>
